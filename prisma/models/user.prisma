model User {
  id              String          @id @default(cuid())
  name            String?
  password        String?
  email           String          @unique
  emailVerifiedAt DateTime?
  avatar          String?
  countryCode     String? // 国家代码 如 +86
  phone           String? // 电话号码
  phoneVerifiedAt DateTime? // 电话验证时间
  active          Boolean         @default(true)
  deletedAt       DateTime? // 软删除时间戳
  accounts        Account[]
  sessions        Session[]
  Authenticator   Authenticator[]

  // 订单相关关联
  orders                Order[]       @relation("UserOrders") // 用户的订单
  currentOwnerOrders    Order[]       @relation("CurrentOwnerOrders") // 当前负责的订单
  financialCloserOrders Order[]       @relation("FinancialCloserOrders") // 财务结单的订单
  createdRefunds        OrderRefund[] @relation("RefundCreator") // 创建的退款记录

  // 产品相关关联
  createdProducts Product[] @relation("ProductCreator") // 创建的产品
  updatedProducts Product[] @relation("ProductUpdater") // 更新的产品

  // 权限系统关联
  organizations   UserOrganization[] // 用户所属组织
  departments     UserDepartment[] // 用户所属部门
  roles           UserRole[] // 用户角色
  permissions     UserPermission[] // 用户特殊权限
  dataPermissions UserDataPermission[] // 用户数据权限

  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt

  @@unique([countryCode, phone], name: "unique_phone_combination")
  @@index([deletedAt]) // 软删除查询索引
}
